{
  "name": "BioFlow DTI Pipeline",
  "description": "Drug-Target Interaction prediction pipeline using DeepPurpose model and Qdrant vector search. This flow represents the BioFlow Orchestrator hackathon project.",
  "data": {
    "nodes": [
      {
        "id": "TextInput-SMILES",
        "type": "genericNode",
        "position": {"x": 100, "y": 200},
        "data": {
          "type": "TextInput",
          "node": {
            "template": {
              "input_value": {
                "value": "CC(=O)Nc1ccc(O)cc1",
                "display_name": "Drug SMILES",
                "info": "Enter a SMILES string representing the drug molecule (e.g., Acetaminophen: CC(=O)Nc1ccc(O)cc1)"
              }
            },
            "display_name": "Drug Input (SMILES)",
            "description": "Input drug molecule in SMILES format"
          }
        }
      },
      {
        "id": "TextInput-Protein",
        "type": "genericNode",
        "position": {"x": 100, "y": 400},
        "data": {
          "type": "TextInput",
          "node": {
            "template": {
              "input_value": {
                "value": "MKKFFDSRREQGGSGLGSGSSGGGGSTSGLGSGYIGRVFGIGRQQVTVDEVLAEGGFAIVFLVRTSNGMKCALKRMFVNNEHDLQVCKREIQIMRDLSGHKNIVGYIDSSINNVSSGDVWEVLILMDFCRGGQVVNLMNQRLQTGFTENEVLQIFCDTCEAVARLHQCKTPIIHRDLKVENILLHDRGHYVLCDFGSATNKFQNPQTEGVNAVEDEIKKYTTLSYRAPEMVNLYSGKIITTKADIWALGCLLYKLCYFTLPFGESQVAICDGNFTIPDNSRYSQDMHCLIRYMLEPDPDKRPDIYQVSYFSFKLLKKECPIPNVQNSPIPAKLPEPVKASEAAAKKTQPKARLTDPIPTTETSIAPRQRPKAGQTQPNPGILPIQPALTPRKRATVQPPPQAAGSSNQPGLLASVPQPKPQAPPSQPLPQTQAKQPQAPPTPQQTPSTQAQGLPAQAQATPQHQQQLFLKQQQQQQQPPPAQQQPAGTFYQQQQAQTQQFQAVHPATQKPAIAQFPVVSQGGSQQQLMQNFYQQQQQQQQQQQQQQLATALHQQQLMTQQAALQQKPTMAAGQQPQPQPAAAPQPAPAQEPAIQAPVRQQPKVQTTPPPAVQGQKVGSLTPPSSPKTQRAGHRRILSDVTHSAVFGVPASKSTQLLQAAAAEASLNKSKSATTTPSGSPRTSQQNVYNPSEGSTWNPFDDDNFSKLTAEELLNKDFAKLGEGKHPEKLGGSAESLIPGFQSTQGDAFATTSFSAGTAEKRKGGQTVDSGLPLLSVSDPFIPLQVPDAPEKLIEGLKSPDTSLLLPDLLPMTDPFGSTSDAVIEKADVAVESLIPGLEPPVPQRLPSQTESVTSNRTDSLTGEDSLLDCSLLSNPTTDLLEEFAPTAISAPVHKAAEDSNLISGFDVPEGSDKVAEDEFDPIPVLITKNPQGGHSRNSSGSSESSLPNLARSLLLVDQLIDL",
                "display_name": "Target Sequence",
                "info": "Enter a protein target amino acid sequence (e.g., AAK1 kinase)"
              }
            },
            "display_name": "Target Input (Protein)",
            "description": "Input target protein amino acid sequence"
          }
        }
      },
      {
        "id": "APIRequest-Encode",
        "type": "genericNode",
        "position": {"x": 400, "y": 300},
        "data": {
          "type": "APIRequest",
          "node": {
            "template": {
              "url": {
                "value": "http://localhost:8001/api/search",
                "display_name": "BioFlow API URL"
              },
              "method": {
                "value": "POST",
                "display_name": "HTTP Method"
              },
              "body": {
                "value": "{\"query\": \"{smiles}\", \"type\": \"drug\", \"limit\": 20}",
                "display_name": "Request Body",
                "info": "DeepPurpose encoding + Qdrant vector search"
              }
            },
            "display_name": "DeepPurpose Encoder",
            "description": "Morgan fingerprint + CNN encoding via BioFlow API"
          }
        }
      },
      {
        "id": "APIRequest-Qdrant",
        "type": "genericNode",
        "position": {"x": 700, "y": 200},
        "data": {
          "type": "APIRequest",
          "node": {
            "template": {
              "url": {
                "value": "http://localhost:8001/api/points?limit=500&view=combined",
                "display_name": "Qdrant Visualization API"
              },
              "method": {
                "value": "GET",
                "display_name": "HTTP Method"
              }
            },
            "display_name": "Qdrant Vector Store",
            "description": "23,531 drug-target pairs from KIBA dataset"
          }
        }
      },
      {
        "id": "ConditionalRouter-Affinity",
        "type": "genericNode",
        "position": {"x": 700, "y": 400},
        "data": {
          "type": "ConditionalRouter",
          "node": {
            "template": {
              "condition": {
                "value": "score > 0.8",
                "display_name": "High Affinity Threshold"
              }
            },
            "display_name": "Affinity Filter",
            "description": "Filter results by binding affinity score"
          }
        }
      },
      {
        "id": "TextOutput-Results",
        "type": "genericNode",
        "position": {"x": 1000, "y": 300},
        "data": {
          "type": "TextOutput",
          "node": {
            "template": {
              "input_value": {
                "display_name": "DTI Predictions",
                "info": "Top candidate drug-target interactions"
              }
            },
            "display_name": "Pipeline Output",
            "description": "Ranked drug-target interaction predictions"
          }
        }
      }
    ],
    "edges": [
      {
        "id": "e1",
        "source": "TextInput-SMILES",
        "target": "APIRequest-Encode",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "e2",
        "source": "TextInput-Protein",
        "target": "APIRequest-Encode",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "e3",
        "source": "APIRequest-Encode",
        "target": "APIRequest-Qdrant",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "e4",
        "source": "APIRequest-Qdrant",
        "target": "ConditionalRouter-Affinity",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "id": "e5",
        "source": "ConditionalRouter-Affinity",
        "target": "TextOutput-Results",
        "sourceHandle": "true_output",
        "targetHandle": "input"
      }
    ]
  },
  "is_component": false,
  "folder": null,
  "endpoint_name": "bioflow-dti"
}
